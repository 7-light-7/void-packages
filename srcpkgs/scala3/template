# Template file for 'scala3'
pkgname=scala3
version=3.6.4
revision=1
archs="noarch x86_64-musl"
wrksrc="scala3-${version}"
build_style=meta
hostmakedepends="unzip"
depends="openjdk17"
short_desc="Scala 3 programming language"
maintainer="Dillon <burn5k@proton.me>"
license="Apache-2.0"
homepage="https://www.scala-lang.org"
distfiles="https://github.com/lampepfl/dotty/releases/download/${version}/scala3-${version}.zip"
checksum=a8cac0d612974eb7755d62462f04eb1fb62bd723bb3fd5524f570de8dfe5826f

do_install() {
	vmkdir usr/share/scala3
	vmkdir usr/bin

	vcopy . usr/share/scala3

	cat > ${DESTDIR}/usr/bin/scala3 <<EOF
#!/bin/sh
export JAVA_HOME=/usr/lib/jvm/default-jdk
exec /usr/share/scala3/bin/scala "\$@"
EOF

	cat > ${DESTDIR}/usr/bin/scalac3 <<EOF
#!/bin/sh
export JAVA_HOME=/usr/lib/jvm/default-jdk
exec /usr/share/scala3/bin/scalac "\$@"
EOF

	chmod +x ${DESTDIR}/usr/bin/scala3
	chmod +x ${DESTDIR}/usr/bin/scalac3
}
